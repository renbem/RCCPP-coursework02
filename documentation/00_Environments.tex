%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% UMGEBUNG FUER CODE-DOKUMENTATION %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newenvironment{explain}{\begin{list}{\LARGE\color{gray}$\bullet$}{%
\setlength{\labelsep}{3mm}% davor 2.3mm
\setlength{\labelwidth}{1mm}% davor 3mm
\setlength{\leftmargin}{8mm}% davor 7mm
\setlength{\itemsep}{0mm}%
}}{\end{list}}


%Makro f\"ur aufeinander folgende Erh\"ohung der Lemma-/Satz-/Definitions- und Algorithmus-Counter
\newcommand{\updateCtr}[1]{
	\addtocounter{helper}{1}	%Master-Ctr inkrementieren
	
	\FPset\dummy{\thehelper}  %Da Befehl refstepcounter auch um eines erh\"oht, w\"urde ohne diese Zeilen
	\FPsub\dummy\thehelper{1} %erster Counter-Wert gleich 2 sein.
	\FPclip\dummy\dummy
	
	\setcounter{#1}{\dummy}
	\refstepcounter{#1}
}

%---Counter:
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \newcounter{const}
\newcounter{helper}[section] %sorgt f\"ur fortlaufende Nummerierung bei Satz/Lemma/Algorithmus/Definition
% \newcounter{satz}[section] %neuer counter; reset des counters bei neuer section
% \newcounter{lemma}[section]
\newcounter{algorithm}[section]
% \newcounter{definition}[section]

\numberwithin{equation}{section} %koppelt Counter equation an section
%\numberwithin{lstlisting}{section}

% \renewcommand{\theconst}{\arabic{const}}
% \renewcommand{\thesatz}{\arabic{section}.\arabic{satz}}           %Ausgabe bei Referenzierung
% \renewcommand{\thelemma}{\arabic{section}.\arabic{lemma}}
% \renewcommand{\thedefinition}{\arabic{section}.\arabic{definition}}
\renewcommand{\thealgorithm}{\arabic{section}.\arabic{algorithm}}
\renewcommand{\theequation}{\arabic{section}.\arabic{equation}}
% \renewcommand{\thesubfigure}{\,(\alph{subfigure})}

\renewcommand{\labelenumi}{(\arabic{enumi})}

\renewcommand\appendix{%\par 
	\numberwithin{lstlisting}{section} %Zaehler lstlisting im Anhang auf Null setzen -> Listing A.1 (ohne Listing 1 zu verlinken!)
	\renewcommand\thesection{A}% 
  \renewcommand\thesubsection{A.\arabic{subsection}}% 
  %\renewcommand\thefigure{\Alph{section}.\arabic{figure}}%
	\renewcommand\thelstlisting{A.\arabic{lstlisting}}%
}

%---Umgebungen:
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \renewenvironment{quote}% %Veraendern der Einz\"uge innerhalb der quote-Umgebung.
% {\begin{list}{}{% 
%   \setlength{\leftmargin}{0.5cm}%
%   \setlength{\rightmargin}{0.5cm}}%
%   \item[]\ignorespaces}%
% {\unskip\end{list}}

\newenvironment{satz}[1][]%
{%\begin{satz}

  \updateCtr{satz}%
  \medskip\noindent\begin{mdframed}[linewidth=\MyLineWidth]\noindent\textbf{\textit{Satz~\arabic{section}.\arabic{satz}%
  \ifthenelse{\equal{#1}{}}{}{~(#1).}}} \it
}
{%\end{satz}
  \end{mdframed}
  
  \medskip

}

\newenvironment{satzob}[1][]%Satz ohne Beweis
{%\begin{satzob}

  \updateCtr{satz}%
  \medskip\noindent\begin{mdframed}[linewidth=\MyLineWidth]\noindent\textbf{\textit{Satz~\arabic{section}.\arabic{satz}%
  \ifthenelse{\equal{#1}{}}{}{~(#1).}}} \it
}
{%\end{satzob}
	\hfill \squareShadow

	\end{mdframed}
	\bigskip

}

\newenvironment{beweis}[1][]%
{%\begin{beweis}
  \noindent\textsc{Beweis\ifthenelse{\equal{#1}{}}{:}{~von~{#1}:}}
}
{%end{beweis}
  \hfill \squareShadow
  \bigskip

}

\newenvironment{lemma}[1][]%
{%\begin{lemma}

  \updateCtr{lemma}%
  \bigskip\noindent\textbf{\textit{Lemma~\arabic{section}.\arabic{lemma}%
  \ifthenelse{\equal{#1}{}}{}{~(#1).}}} \it
}
{%\end{lemma}
  \hfill \squareShadow
  \bigskip

}
\newenvironment{lemmamb}[1][]%Satz MIT Beweis. NICHT KONSISTENT!?!?
{%\begin{lemmamb}

  \updateCtr{lemma}%
  \medskip\noindent\textbf{\textit{Lemma~\arabic{section}.\arabic{lemma}%
  \ifthenelse{\equal{#1}{}}{}{~(#1).}}} \it
}
{%\end{satzmb}

	\bigskip

}
\newenvironment{definition}[1][]%
{%\begin{definition}

  \updateCtr{definition}%
  \bigskip\noindent\textbf{\textit{Definition~\arabic{section}.\arabic{definition}%
  \ifthenelse{\equal{#1}{}}{}{~(#1).}}} \it
}
{%\end{definition}
  \bigskip

}

\newenvironment{algorithm}[1][]%
{%\begin{algorithm}
  \updateCtr{algorithm}%
	\medskip\noindent\begin{mdframed}[linewidth=\MyLineWidth,backgroundcolor=mybackgroundgray% %,innerleftmargin=12,innerrightmargin=12%
	]\noindent\textbf{\textit{Algorithm~\arabic{section}.\arabic{algorithm}%
  \ifthenelse{\equal{#1}{}}{}{~(#1).}}} \it
}
{%\end{algorithm}
	\end{mdframed}
	
  \bigskip

}

% \newenvironment{beispiel}[1][]
% {%\begin{beispiel}
%   \bigskip%
%   \noindent\refstepcounter{satz}\textbf{\textit{Beispiel~\arabic{section}.\arabic{satz}%
%   \ifthenelse{\equal{#1}{}}{}{~(#1).}}}% 
%   %\hangafter=1\hangindent=2em
% }
% {%\end{beispiel}
%   \bigskip
% }